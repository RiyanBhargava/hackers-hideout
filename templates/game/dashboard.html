{% extends 'base.html' %}

{% block title %}Dashboard - Hacker's Hideout{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h2>Control Panel - {{ player.team_name }}</h2>
        <div class="score-display">
            <span class="score-label">Total Score:</span>
            <span class="score-value">{{ player.total_score }}</span>
        </div>
    </div>

    <div class="mission-briefing">
        <h3>ðŸ“¡ Challenge Status</h3>
        <p>Test your skills across seven increasingly difficult cybersecurity challenges. Can you hack them all?</p>
    </div>

    <div class="challenges-grid">
        {% for challenge in challenges %}
        <div class="challenge-card {% if challenge.id in completed_ids %}completed{% elif challenge == player.current_challenge %}active{% else %}locked{% endif %}">
            <div class="challenge-header">
                <h3>Part {{ challenge.part_number }}: {{ challenge.title }}</h3>
                <span class="challenge-difficulty difficulty-{{ challenge.difficulty|lower }}">{{ challenge.difficulty }}</span>
            </div>
            
            <div class="challenge-info">
                <p class="challenge-points">ðŸ’Ž {{ challenge.points }} points</p>
                {% if challenge.id in hints_used %}
                <p class="hint-used">ðŸ’¡ Hint Used (-{{ challenge.hint_penalty }} pts)</p>
                {% endif %}
            </div>
            
            <div class="challenge-status">
                {% if challenge.id in completed_ids %}
                    <span class="status-badge status-completed">âœ“ Completed</span>
                {% elif challenge == player.current_challenge %}
                    <a href="{% url 'challenge_detail' challenge.part_number %}" class="btn btn-primary btn-small">Start Challenge</a>
                {% elif challenge.part_number == 7 %}
                    {% if completed_ids|length == 6 %}
                        <a href="{% url 'challenge_detail' challenge.part_number %}" class="btn btn-warning btn-small">Final Challenge</a>
                    {% else %}
                        <span class="status-badge status-locked">ðŸ”’ Complete all challenges first</span>
                    {% endif %}
                {% else %}
                    <span class="status-badge status-locked">ðŸ”’ Complete previous challenge</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="dashboard-footer">
        <a href="{% url 'leaderboard' %}" class="btn btn-secondary">View Leaderboard</a>
    </div>
</div>
{% endblock %}
